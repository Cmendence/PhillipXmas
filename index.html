<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="stylesheet" href="styles.css" />
  <title>Phillip's The Elf</title>
  <style>
    .countdown-buttons {
      margin-top: 12px;
      display: flex;
      flex-direction: column;
      gap: 8px;
      align-items: center;
    }

    .countdown-buttons button {
      padding: 10px 18px;
      font-size: 16px;
      border-radius: 6px;
      border: none;
      background-color: #c0282d;
      color: #fff;
      cursor: pointer;
      font-weight: 700;
      min-width: 180px;
    }
  </style>
</head>

<body>
  <div class="stage" role="main" aria-label="Phillip's Workshop Announcement">
    
    <!-- HEADER -->
    <header class="header">
      <div class="avatar" aria-hidden="true">
        <img src="images/Phillip-gifts1.png" alt="Phillip the elf">
      </div>

      <div class="title">
        <h1 class="gallery-title">It's good to be back!</h1>
        <h3 class="gallery-subtitle">Let's see what trouble we can get intoâ€¦</h3>
      </div>

      <div class="countdown">
        <span class="number" id="countdown-display">--</span>
        <span class="label">until Christmas!</span>
        <div class="countdown-buttons" id="countdown-buttons" style="display:none;">
          <button id="scavenger-btn">Start the Scavenger Hunt!</button>
          <button id="gallery-btn">Gallery</button>
        </div>
      </div>
    </header>

    <!-- MAIN CONTENT -->
    <main id="cards-container">
      <div class="grid" aria-label="Phillip's workshop activities">

        <article class="card">
          <img src="images/Phillip-gifts1.png" alt="Phillip delivering gifts">
          <h3></h3>
          <p></p>
        </article>

        <article class="card">
          <img src="images/Phillip-workshop2.png" alt="Phillip relaxing">
          <h3></h3>
          <p></p>
        </article>

        <article class="card">
          <img src="images/Phillip-workshop1.png" alt="Phillip checking the list">
          <h3>Quality Check!</h3>
          <p>Santa has to check our progress to make sure we're doing a good job.</p>
        </article>

      </div>
    </main>

    <!-- FOOTER -->
    <footer class="footer">
      <div class="footer-inner">
        <div class="star" aria-hidden="true">â˜…</div>
        <div class="small">Phillip's Workshop</div>
      </div>
    </footer>

  </div>

  <script>
    (function(){
      const countdownDisplay = document.getElementById('countdown-display');
      const labelEl = countdownDisplay.nextElementSibling;
      const buttonsContainer = document.getElementById('countdown-buttons');
      const scavengerBtn = document.getElementById('scavenger-btn');
      const galleryBtn = document.getElementById('gallery-btn');
      const cardsContainer = document.getElementById('cards-container');

      scavengerBtn.addEventListener('click', () => {
        window.location.href = 'scavengerHome.html';
      });

      galleryBtn.addEventListener('click', () => {
        window.location.href = 'gallery.html';
      });

      function updateCountdown(nowOverride = null){
        const now = nowOverride || new Date();
        const year = now.getFullYear();
        const christmas = new Date(year, 11, 25, 0, 0, 0); // Dec 25, 12:00 AM
        const nextYearChristmas = new Date(year + 1, 11, 25, 0, 0, 0);

        let diffMs;
        let isChristmas = false;

        // If today is Dec 25
        if(now.getMonth() === 11 && now.getDate() === 25){
          isChristmas = true;
          diffMs = 0;
        } else if(now > christmas){
          diffMs = nextYearChristmas - now;
        } else {
          diffMs = christmas - now;
        }

        if(isChristmas){
          countdownDisplay.textContent = "ðŸŽ„ Merry Christmas! ðŸŽ„";
          labelEl.textContent = "";
          buttonsContainer.style.display = "flex";
          cardsContainer.style.display = "none"; // hide cards on Christmas
        } else {
          const totalSeconds = Math.floor(diffMs / 1000);
          const days = Math.floor(totalSeconds / (3600*24));
          const hours = Math.floor((totalSeconds % (3600*24)) / 3600);
          const minutes = Math.floor((totalSeconds % 3600) / 60);
          const seconds = totalSeconds % 60;
          countdownDisplay.textContent = `${days}d ${hours}h ${minutes}m ${seconds}s`;
          labelEl.textContent = "until Christmas!";
          buttonsContainer.style.display = "none";
          cardsContainer.style.display = "block";
        }
      }

      updateCountdown();
      setInterval(updateCountdown, 1000);

      // --------- For Testing Only ---------
      // Pass a Date object to simulate Christmas:
      // updateCountdown(new Date("2025-12-25T00:00:01"));
    })();
  </script>
</body>
</html>
